# Generated by Scaleda
# Warning: only tested on Quartus Prime Standard 17.1.0 Linux with Arria 10 10AX115N4F40E3SGE3
#   and some options may not available in other versions or devices

# Load Quartus Prime Tcl Project package
package require ::quartus::project

set proj {{ top }}

set need_to_close_project 0
set make_assignments 1

# Check that the right project is open
if {[is_project_open]} {
	if {[string compare $quartus(project) "$proj"]} {
		puts "Project $proj is not open"
		set make_assignments 0
	}
} else {
	# Only open if not already open
	if {[project_exists $proj]} {
		project_open -revision $proj $proj
	} else {
		project_new -revision $proj $proj
	}
	set need_to_close_project 1
}

# Make assignments
if {$make_assignments} {
	set_global_assignment -name FAMILY "{{ family }}"
	set_global_assignment -name DEVICE {{ part }}
	# set_global_assignment -name ORIGINAL_QUARTUS_VERSION 17.1.0
	# set_global_assignment -name PROJECT_CREATION_TIME_DATE "21:56:02  五月 13, 2024"
	# set_global_assignment -name LAST_QUARTUS_VERSION "17.1.0 Standard Edition"
	set_global_assignment -name PROJECT_OUTPUT_DIRECTORY output_files
	set_global_assignment -name MIN_CORE_JUNCTION_TEMP 0
	set_global_assignment -name MAX_CORE_JUNCTION_TEMP 100
	set_global_assignment -name ERROR_CHECK_FREQUENCY_DIVISOR 2
	set_global_assignment -name POWER_PRESET_COOLING_SOLUTION "23 MM HEAT SINK WITH 200 LFPM AIRFLOW"
	set_global_assignment -name POWER_BOARD_THERMAL_MODEL "NONE (CONSERVATIVE)"
	set_global_assignment -name PARTITION_NETLIST_TYPE SOURCE -section_id Top
	set_global_assignment -name PARTITION_FITTER_PRESERVATION_LEVEL PLACEMENT -section_id Top
	set_global_assignment -name PARTITION_COLOR 16764057 -section_id Top
	set_instance_assignment -name PARTITION_HIERARCHY root_partition -to | -section_id Top

	{{ insertTclSection }}

    {% for s in sourceVerilogList %}
        set_global_assignment -name VERILOG_FILE { {{ s }} }
    {% endfor %}
    {% for sdc in sdcList %}
        set_global_assignment -name SDC_FILE { {{ sdc }} }
    {% endfor %}
    {% for ip in ipList %}
        set_global_assignment -name IP_FILE { {{ ip }} }
    {% endfor %}

    set_global_assignment -name TOP_LEVEL_ENTITY {{ top }}

	# Commit assignments
	export_assignments

	# Close project
	if {$need_to_close_project} {
		project_close
	}
}
