syntax = "proto3";

package top.criwits.scaleda.kernel.net;

service Remote {
  rpc Run(RunRequest) returns (stream RunReply) {}
}

message StringTriple {
  string a = 1;
  string b = 2;
}

message RunRequest {
  string command = 1;
  string path = 2;
  repeated StringTriple envs = 3;
}

enum RunReplyType {
  RUN_REPLY_TYPE_RETURN = 0;
  RUN_REPLY_TYPE_STDOUT = 1;
  RUN_REPLY_TYPE_STDERR = 2;
}

message RunReply {
  RunReplyType reply_type = 1;
  string str_value = 2;
  int32 int_value = 3;
}